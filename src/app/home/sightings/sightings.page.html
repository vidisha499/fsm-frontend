<ion-content class="sighting-content">
  <div class="modal-header">
    <h2>{{ category }} Log</h2>
    <button class="cancel-btn" (click)="goBack()">CANCEL</button>
  </div>

  <div class="form-container">
    <div class="input-group">
      <label>SIGHTING TYPE</label>
      <div class="custom-select">
        <select [(ngModel)]="obsData.sightingType">
          <option value="Direct">Direct</option>
          <option value="Indirect">Indirect</option>
        </select>
      </div>
    </div>

    <div class="input-group">
      <label>SPECIES</label>
      <input type="text" [(ngModel)]="obsData.species" placeholder="Enter species name">
    </div>

    <div class="input-group">
      <label>NUMBER OF {{ category | uppercase }}S</label>
      <input type="number" [(ngModel)]="obsData.count">
    </div>

    <div class="input-group">
      <label>GENDER</label>
      <div class="gender-selection">
        <label class="radio-item">
          <input type="checkbox" [checked]="obsData.genderMale" (change)="toggleGender('male')">
          <span class="custom-radio"></span> Male
        </label>
        <label class="radio-item">
          <input type="checkbox" [checked]="obsData.genderFemale" (change)="toggleGender('female')">
          <span class="custom-radio"></span> Female
        </label>
        <label class="radio-item">
          <input type="checkbox" [checked]="obsData.genderUnknown" (change)="toggleGender('unknown')">
          <span class="custom-radio"></span> Unknown
        </label>
      </div>
    </div>

    <div class="input-group">
      <label>PHOTOS ({{ obsData.photos.length }}/5)</label>
      <div class="photo-grid" *ngIf="obsData.photos.length > 0">
        <div class="photo-item" *ngFor="let photo of obsData.photos; let i = index">
          <img [src]="photo">
          <ion-icon name="close-circle" class="remove-icon" (click)="removePhoto(i)"></ion-icon>
        </div>
      </div>
      <button class="add-photo-btn" (click)="takePhoto()" [disabled]="obsData.photos.length >= 5">
        <ion-icon name="camera-outline"></ion-icon> ADD PHOTO
      </button>
    </div>

    <div class="input-group">
      <label>NOTES</label>
      <textarea [(ngModel)]="obsData.notes" rows="3" placeholder="Additional details..."></textarea>
    </div>
  </div>


  <div class="footer-btn">
  <div class="auto-slider-container" 
       [class.active]="isSubmitting"
       [class.disabled]="isSaving"
       (touchstart)="onDragStart($event)"
       (touchmove)="onDragMove($event)"
       (touchend)="onDragEnd()">
       
    <div class="slider-track">
      <div class="slider-handle" 
           [style.transform]="'translateX(' + currentTranslateX + 'px)'">
        <ion-icon [name]="isSubmitting ? 'sync-outline' : 'chevron-forward-outline'" 
                  [class.spin-icon]="isSubmitting">
        </ion-icon>
      </div>

      <span class="slider-text" [style.opacity]="textOpacity">
        {{ isSubmitting ? 'SAVING LOG...' : 'SLIDE TO SAVE LOG' }}
      </span>

      <div class="end-check">
        <ion-icon name="checkmark-outline"></ion-icon>
      </div>
    </div>
  </div>
</div>
</ion-content>