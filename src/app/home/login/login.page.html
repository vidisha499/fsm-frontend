<ion-content [fullscreen]="true" class="login-content" scrollY="false">
  <div class="background-image"></div>
  <div class="vignette-overlay"></div>

  <div class="login-container">
    <div class="brand-section">
      <div class="logo-wrapper">
        <div class="leaf-icon">
          <i class="fas fa-leaf"></i>
        </div>
      </div>
      <h1 class="fsm-logo-text">PUGARCH <span class="highlight">FSM</span></h1>
      <p class="auth-tag"><span class="pulse-dot"></span> AUTHORIZED ACCESS ONLY</p>
    </div>

    <div class="login-card">
      <h2 class="form-title">Ranger Login</h2>

    
      <div class="input-group">
  <label>MOBILE NUMBER</label>
  <div class="field">
    <i class="fas fa-phone-alt"></i>
    <span class="country-prefix">+91</span> 
    <input type="tel" [(ngModel)]="loginData.phone" placeholder="Enter Mobile Number">
  </div>
</div>

     
      <div class="input-group">
        <label>SECURITY PASSWORD</label>
        <div class="field">
          <i class="fas fa-lock"></i>
          <input [type]="isPasswordVisible ? 'text' : 'password'" [(ngModel)]="loginData.password" placeholder="••••••••">
          <i class="fas" [ngClass]="isPasswordVisible ? 'fa-eye-slash' : 'fa-eye'" 
             (click)="isPasswordVisible = !isPasswordVisible" class="eye-toggle"></i>
        </div>
      </div>

      <div class="forgot-link">
        <a (click)="forgotPassword()">FORGOT PASSWORD?</a>
      </div>

      <button class="login-btn" (click)="login()">
        LOG IN <i class="fas fa-arrow-right"></i>
      </button>

      <div class="enroll-section">
        NEW RANGER? <a (click)="enroll()">ENROLL NOW</a>
      </div>
    </div>
  </div>
<ion-modal [isOpen]="isResetModalOpen" class="reset-modal">
  <ng-template>
    <div class="login-container modal-style">
      <div class="login-card">
        <h2 class="form-title">Reset Password</h2>
        
        <div *ngIf="!isOtpVerified" class="animate__animated animate__fadeIn">
          <p style="color: #ccc; text-align: center; font-size: 0.85em; margin-bottom: 15px;">
            Enter the 6-digit code sent to your email.
          </p>
          <div class="input-group">
            <label>OTP CODE</label>
            <div class="field">
              <i class="fas fa-key"></i>
              <input type="text" [(ngModel)]="resetData.otp" placeholder="Enter 6-digit OTP">
            </div>
            <div class="resend-wrapper">
              <p *ngIf="resendCountdown > 0" class="timer-text">Resend in <b>{{ resendCountdown }}s</b></p>
              <a *ngIf="resendCountdown === 0" (click)="resendOtp()" class="resend-link">RESEND OTP</a>
            </div>
          </div>
          <button class="login-btn" (click)="verifyOtpOnly()" style="margin-top: 20px;">
            VERIFY OTP <i class="fas fa-check-circle"></i>
          </button>
        </div>


          <div *ngIf="isOtpVerified" class="animate__animated animate__zoomIn">
  
  <div style="text-align: center; margin-bottom: 20px;">
    <div class="success-icon-wrapper">
      <i class="fas fa-check-circle verified-check"></i>
    </div>
    <h3 style="color: #2dd36f; margin-top: 10px; font-size: 1.1em;">Verified!</h3>
    <p style="color: #ccc; font-size: 0.8em;">Set your new security password below</p>
  </div>

         

          <div class="input-group">
    <label>NEW PASSWORD</label>
    <div class="field">
      <i class="fas fa-lock"></i>
      <input [type]="showNewPassword ? 'text' : 'password'" [(ngModel)]="resetData.newPassword" placeholder="••••••••">
      <i class="fas" [ngClass]="showNewPassword ? 'fa-eye-slash' : 'fa-eye'" (click)="toggleNewPassword()" class="eye-toggle"></i>
    </div>
  </div>

          <div class="input-group">
            <label>CONFIRM PASSWORD</label>
            <div class="field">
              <i class="fas fa-check-circle"></i>
              <input [type]="showConfirmPassword ? 'text' : 'password'" [(ngModel)]="resetData.confirmPassword" placeholder="Confirm Password">
              <i class="fas" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'" (click)="toggleConfirmPassword()" class="eye-toggle"></i>
            </div>
          </div>

          <button class="login-btn" (click)="handlePasswordReset()">
            UPDATE PASSWORD <i class="fas fa-save"></i>
          </button>
        </div>

        <div class="forgot-link" style="text-align: center; margin-top: 15px;">
          <a (click)="closeResetModal()" style="color: #ff4d4d; cursor: pointer;">CANCEL</a>
        </div>
      </div>
    </div>
  </ng-template>
</ion-modal>
</ion-content>