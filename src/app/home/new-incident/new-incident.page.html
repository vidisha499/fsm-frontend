<ion-content [fullscreen]="true">
  <div class="premium-wrapper">
    <div class="ambient-glow glow-1"></div>
    <div class="ambient-glow glow-2"></div>

    <div class="hero-header">
      <div class="header-overlay"></div>
      <div class="header-content">
        <div class="nav-bar">
          <button (click)="goBack()" class="glass-btn">
            <ion-icon name="arrow-back-outline"></ion-icon>
          </button>
          <div class="auth-badge">
            <i class="fas fa-shield-alt"></i>
            <!-- <span>NEW PROTOCOL</span> -->
          </div>
        </div>
        <h1>{{ 'REPORT.TITLE' | translate }}</h1>
      </div>
    </div>

    <div class="main-container">
      <div class="form-card">
        
      
        <div class="photo-evidence-container">
          <div class="photo-grid">
            <div class="photo-item animate__animated animate__zoomIn" *ngFor="let photo of capturedPhotos; let i = index">
              <img [src]="photo" class="preview-img" />
              <button class="remove-btn" (click)="removePhoto(i)">
                <i class="fas fa-times"></i>
              </button>
            </div>

            <div (click)="takePhoto()" class="upload-zone-mini" *ngIf="capturedPhotos.length<5">
              <div class="mini-icon-circle">
                <i class="fas fa-camera"></i>
              </div>
              <span class="mini-text">ADD PHOTO</span>
            </div>
          </div>
          <p class="counter-text">{{ capturedPhotos.length }} / 5 Photos</p>
        </div>

        <div class="input-stack">
          
          <div class="input-group">
            <label class="input-label priority-lbl">{{ 'REPORT.PRIORITY_LABEL' | translate }}</label>
            <div class="input-wrapper">
              <i class="fas fa-bolt"></i>
              <select class="styled-select" [(ngModel)]="incidentData.priority">
                <option value="High Priority">{{ 'REPORT.P_HIGH' | translate }}</option>
                <option value="Medium Priority">{{ 'REPORT.P_MED' | translate }}</option>
                <option value="Low Priority">{{ 'REPORT.P_LOW' | translate }}</option>
              </select>
            </div>
          </div>

          <div class="input-group">
            <label class="input-label category-lbl">{{ 'REPORT.CATEGORY_LABEL' | translate }}</label>
            <div class="input-wrapper">
              <i class="fas fa-layer-group"></i>
              <select class="styled-select" [(ngModel)]="incidentData.criteria">
                <option value="Fire Warning">{{ 'REPORT.C_FIRE' | translate }}</option>
                <option value="Illegal Encroachment">{{ 'REPORT.C_ILLEGAL' | translate }}</option>
                <option value="Animal Disturbance">{{ 'REPORT.C_ANIMAL' | translate }}</option>
              </select>
            </div>
          </div>

          <div class="input-group checklist-group">
            <label class="input-label checklist-lbl">{{ 'REPORT.CHECKLIST_TITLE' | translate }}</label>
            <div class="input-wrapper">
              <i class="fas fa-clipboard-list"></i>
              <select class="styled-select" [(ngModel)]="incidentData.cause">
                <option value="Short Circuit">{{ 'REPORT.CAUSE_SHORT' | translate }}</option>
                <option value="Manual Error">{{ 'REPORT.CAUSE_MANUAL' | translate }}</option>
                <option value="External Interference">{{ 'REPORT.CAUSE_EXT' | translate }}</option>
              </select>
            </div>
          </div>

          <div class="input-group observation-group">
            <label class="input-label observation-lbl">{{ 'REPORT.OBS_LABEL' | translate }}</label>
            <div class="input-wrapper textarea-mode">
              <i class="fas fa-pen-nib"></i>
              <textarea 
                [(ngModel)]="incidentData.observation" 
                [placeholder]="'REPORT.OBS_PH' | translate" 
                rows="1" 
                (input)="adjustHeight($event)"
                class="styled-textarea">
              </textarea>
            </div>
          </div>
        </div> 
        
        
        <!-- <div class="auto-slider-container" (click)="submitReport()" [class.active]="isSubmitting">
          <div class="slider-track">
            <div class="slider-handle">
              <i class="fas fa-chevron-right" *ngIf="!isSubmitting"></i>
              <ion-spinner name="crescent" color="light" *ngIf="isSubmitting"></ion-spinner>
            </div>
            <span class="slider-text">
              {{ isSubmitting ? ('REPORT.SUBMITTING' | translate) : ('REPORT.SUBMIT_BTN' | translate) }}
            </span>
            <div class="end-check">
              <i class="fas fa-check"></i>
            </div>
          </div>
        </div> -->


        <div class="auto-slider-container" 
     (click)="capturedPhotos.length > 0 ? submitReport() : null" 
     [class.active]="isSubmitting"
     [class.disabled]="capturedPhotos.length === 0">
     
  <div class="slider-track">
    <div class="slider-handle">
      <i class="fas fa-lock" *ngIf="capturedPhotos.length === 0"></i>
      <i class="fas fa-chevron-right" *ngIf="capturedPhotos.length > 0 && !isSubmitting"></i>
      <ion-spinner name="crescent" color="light" *ngIf="isSubmitting"></ion-spinner>
    </div>
    
    <span class="slider-text">
      {{  (isSubmitting ? ('REPORT.SUBMITTING' | translate) : ('REPORT.SUBMIT_BTN' | translate)) }}
    </span>
    
    <div class="end-check">
      <i class="fas fa-check"></i>
    </div>
  </div>
</div>

      </div> </div> </div> </ion-content>
